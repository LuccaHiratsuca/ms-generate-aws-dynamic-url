<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lista de Imagens</title>
    <style>
        body { font-family: Arial; padding: 40px; }
        .card { 
            padding: 12px; 
            background: #f1f1f1; 
            margin-bottom: 10px; 
            border-radius: 8px; 
            cursor: pointer; 
        }
        .card:hover { background: #e0e0e0; }
    </style>
</head>

<body>
    <h1>Imagens Armazenadas</h1>
    <div id="list"></div>

    <script>
        async function loadList() {
            const res = await fetch("/api/list-images");
            
            const data = await res.json();

            const container = document.getElementById("list");

            if (!data.images || data.images.length === 0) {
                container.innerHTML = "<p>Nenhuma imagem encontrada.</p>";
                return;
            }

            for (const img of data.images) {
                const div = document.createElement("div");
                div.className = "card";
                div.onclick = () => {
                    window.location.href = `/view?imageId=${img.imageId}`;
                };

                div.innerHTML = `
                    <b>ID:</b> ${img.imageId}<br>
                    <b>Tipo:</b> ${img.contentType}<br>
                    <b>Tamanho:</b> ${(img.sizeBytes / 1024).toFixed(2)} KB<br>
                    <b>Criada em:</b> ${img.createdAt}
                `;

                container.appendChild(div);
            }
        }

        loadList();
    </script>
</body>
</html>
